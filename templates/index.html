<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titanic Survival Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Top Controls -->
    <div class="container mt-3">
        <div class="d-flex justify-content-between align-items-center">
            <a href="/dashboard" class="btn btn-outline-light" data-en="Dashboard" data-ar="ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ">Dashboard</a>
            <div class="d-flex gap-2">
            <!-- Language Toggle -->
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-outline-secondary btn-sm lang-btn active" data-lang="en">EN</button>
                <button type="button" class="btn btn-outline-secondary btn-sm lang-btn" data-lang="ar">ÿπÿ±ÿ®Ÿä</button>
            </div>
            <!-- Theme Toggle -->
            <button type="button" class="btn btn-outline-secondary btn-sm" id="themeToggle">
                <span class="theme-icon">üåô</span>
            </button>
            </div>
        </div>
    </div>

    <div class="container mt-3">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0 text-center" data-en="Titanic Survival Predictor" data-ar="ŸÖÿ™ŸÜÿ®ÿ¶ ÿßŸÑŸÜÿ¨ÿßÿ© ŸÖŸÜ ÿ™Ÿäÿ™ÿßŸÜŸäŸÉ">Titanic Survival Predictor</h3>
                    </div>
                    <div class="card-body">
                        <p class="text-muted text-center" data-en="Enter passenger details to predict survival probability" data-ar="ÿ£ÿØÿÆŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ±ÿßŸÉÿ® ŸÑŸÑÿ™ŸÜÿ®ÿ§ ÿ®ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÑŸÜÿ¨ÿßÿ©">Enter passenger details to predict survival probability</p>

                        {% if error %}
                        <div class="alert alert-danger" role="alert">
                            {{ error }}
                        </div>
                        {% endif %}

                        <form action="/predict" method="POST">
                            <div class="mb-3">
                                <label for="pclass" class="form-label" data-en="Passenger Class" data-ar="ÿØÿ±ÿ¨ÿ© ÿßŸÑÿ±ÿßŸÉÿ®">Passenger Class</label>
                                <select class="form-select" id="pclass" name="pclass" required>
                                    <option value="1" data-en="1st Class" data-ar="ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ£ŸàŸÑŸâ">1st Class</option>
                                    <option value="2" data-en="2nd Class" data-ar="ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©">2nd Class</option>
                                    <option value="3" selected data-en="3rd Class" data-ar="ÿßŸÑÿØÿ±ÿ¨ÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©">3rd Class</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="sex" class="form-label" data-en="Sex" data-ar="ÿßŸÑÿ¨ŸÜÿ≥">Sex</label>
                                <select class="form-select" id="sex" name="sex" required>
                                    <option value="0" data-en="Male" data-ar="ÿ∞ŸÉÿ±">Male</option>
                                    <option value="1" data-en="Female" data-ar="ÿ£ŸÜÿ´Ÿâ">Female</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="marital_status" class="form-label" data-en="Marital Status" data-ar="ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©">Marital Status</label>
                                <select class="form-select" id="marital_status" name="marital_status" required>
                                    <option value="0" selected data-en="Single / Bachelor" data-ar="ÿ£ÿπÿ≤ÿ®">Single / Bachelor</option>
                                    <option value="1" data-en="Married" data-ar="ŸÖÿ™ÿ≤Ÿàÿ¨">Married</option>
                                    <option value="2" data-en="Widowed" data-ar="ÿ£ÿ±ŸÖŸÑ">Widowed</option>
                                </select>
                            </div>

                            <div class="mb-3">
                                <label for="age" class="form-label" data-en="Age" data-ar="ÿßŸÑÿπŸÖÿ±">Age</label>
                                <input type="number" class="form-control" id="age" name="age"
                                       min="0" max="120" step="0.1" value="30" required>
                            </div>

                            <div class="mb-3">
                                <label for="height" class="form-label" data-en="Height (cm)" data-ar="ÿßŸÑÿ∑ŸàŸÑ (ÿ≥ŸÖ)">Height (cm)</label>
                                <input type="number" class="form-control" id="height" name="height"
                                       min="50" max="250" step="0.1" value="170" required>
                            </div>

                            <div class="mb-3">
                                <label for="fare" class="form-label" data-en="Fare (in pounds)" data-ar="ÿßŸÑÿ£ÿ¨ÿ±ÿ© (ÿ®ÿßŸÑÿ¨ŸÜŸäŸá)">Fare (in pounds)</label>
                                <input type="number" class="form-control" id="fare" name="fare"
                                       min="0" step="0.01" value="32" required>
                            </div>

                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg" data-en="Predict Survival" data-ar="ÿ™ŸÜÿ®ÿ§ ÿ®ÿßŸÑŸÜÿ¨ÿßÿ©">Predict Survival</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookieBanner" class="cookie-banner" style="display: none;">
        <div class="cookie-content">
            <div class="cookie-icon">üç™</div>
            <div class="cookie-text">
                <p class="mb-1 fw-bold" data-en="We use cookies" data-ar="ŸÜÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑">We use cookies</p>
                <p class="mb-0 small" data-en="This website uses cookies to store your preferences (language, theme) and improve your experience." data-ar="Ÿäÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞ÿß ÿßŸÑŸÖŸàŸÇÿπ ŸÖŸÑŸÅÿßÿ™ ÿ™ÿπÿ±ŸäŸÅ ÿßŸÑÿßÿ±ÿ™ÿ®ÿßÿ∑ ŸÑÿ≠ŸÅÿ∏ ÿ™ŸÅÿ∂ŸäŸÑÿßÿ™ŸÉ (ÿßŸÑŸÑÿ∫ÿ©ÿå ÿßŸÑŸÖÿ∏Ÿáÿ±) Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ.">This website uses cookies to store your preferences (language, theme) and improve your experience.</p>
            </div>
            <div class="cookie-buttons">
                <button class="btn btn-success btn-sm" id="acceptCookies" data-en="Accept" data-ar="ŸÇÿ®ŸàŸÑ">Accept</button>
                <button class="btn btn-outline-secondary btn-sm" id="declineCookies" data-en="Decline" data-ar="ÿ±ŸÅÿ∂">Decline</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Cookie consent
        function showCookieBanner() {
            const consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                document.getElementById('cookieBanner').style.display = 'block';
            }
        }

        document.getElementById('acceptCookies').addEventListener('click', () => {
            localStorage.setItem('cookieConsent', 'accepted');
            document.getElementById('cookieBanner').style.display = 'none';
        });

        document.getElementById('declineCookies').addEventListener('click', () => {
            localStorage.setItem('cookieConsent', 'declined');
            document.getElementById('cookieBanner').style.display = 'none';
        });

        showCookieBanner();

        // Language switching
        let currentLang = localStorage.getItem('lang') || 'en';

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('lang', lang);

            // Update HTML direction
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            // Update all translatable elements
            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${lang}`);
            });

            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        }

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
        });

        // Theme switching
        let currentTheme = localStorage.getItem('theme') || 'light';

        function setTheme(theme) {
            currentTheme = theme;
            localStorage.setItem('theme', theme);
            document.body.classList.toggle('dark-mode', theme === 'dark');
            document.querySelector('.theme-icon').textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        document.getElementById('themeToggle').addEventListener('click', () => {
            setTheme(currentTheme === 'light' ? 'dark' : 'light');
        });

        // Initialize on page load
        setLanguage(currentLang);
        setTheme(currentTheme);
    </script>
</body>
</html>
